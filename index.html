<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAFS' Secret Garden DP Frame - Caption and Timer</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght%40700&family=Lora:wght%40400%3B700&display=swap" rel="stylesheet">
    <style>
        
        :root {
            --primary-gold: #B8860B; 
            --light-gold: #DAA520; 
            --soft-cream: #FFF8E1; 
            --warm-white: #FFFAF0; 
            --accent-gold: #FFD700; 
            --dark-text: #333333; 
            --light-text: #FFFFFF; 
            --shadow-light: rgba(0, 0, 0, 0.1);
            --shadow-medium: rgba(0, 0, 0, 0.2);
            --shadow-strong: rgba(0, 0, 0, 0.4);
            --border-radius-soft: 8px;
            --border-radius-round: 50%;
        }

        
        body {
            box-sizing: border-box;
            margin: 0;
            font-family: 'Lora', serif;
            color: var(--dark-text);
            background-image: url('Background.png'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; 
            min-height: 100vh;
            padding: 20px; 
            position: relative;
        }

        
        .header-content {
            margin-bottom: 20px;
            opacity: 0; 
            transform: translateY(-20px); 
            animation: fadeInSlideDown 1.5s ease-out forwards;
        }

        @keyframes fadeInSlideDown {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo-image {
            max-width: 350px; 
            height: auto;
            display: block;
            margin: 0 auto;
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.7)); 
        }

        
        .container {
            background-color: var(--soft-cream);
            border-radius: var(--border-radius-soft);
            box-shadow: 0 10px 25px var(--shadow-strong);
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            max-width: 900px; 
            width: calc(100% - 40px); 
            margin: 0 auto 40px auto; 
            opacity: 0; 
            transform: translateY(20px); 
            animation: fadeInSlideUp 1.5s ease-out 0.5s forwards; 
            z-index: 10; 
            position: relative; 
            min-height: fit-content; 
        }

        @keyframes fadeInSlideUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        
        .action-button {
            background-color: var(--warm-white); 
            color: var(--primary-gold); 
            padding: 15px 30px; 
            border-radius: var(--border-radius-soft);
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, border-color 0.3s ease, color 0.3s ease;
            font-weight: bold;
            border: 2px solid var(--primary-gold); 
            text-transform: uppercase;
            text-align: center;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 0 auto;
            width: 100%; 
            max-width: 280px; 
            box-shadow: 0 5px 15px var(--shadow-medium); 
        }

        
        .action-button:hover:not(:disabled) {
            background-color: var(--primary-gold); 
            color: var(--light-text); 
            transform: translateY(-2px);
            border-color: var(--primary-gold); 
        }

        
        .action-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
            color: #666666;
            border-color: #999999;
            box-shadow: none;
        }

        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000; 
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: var(--warm-white);
            padding: 30px;
            border-radius: var(--border-radius-soft);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            position: relative;
            text-align: center;
            animation: modalRise 0.3s ease-out forwards;
            color: var(--dark-text);
        }

        @keyframes modalRise {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h3 {
            font-family: 'Playfair Display', serif;
            color: var(--primary-gold);
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .modal-content p {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .close-modal-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5em;
            color: var(--dark-text);
            cursor: pointer;
            transition: color 0.2s ease;
        }

        .close-modal-btn:hover {
            color: var(--primary-gold);
        }

        
        #captionCustomizationModal .modal-buttons {
            display: flex;
            flex-direction: column; 
            align-items: center; 
            gap: 15px; 
            width: 100%;
            max-width: 320px; 
            margin: 20px auto 0 auto;
        }

        
        #captionCustomizationModal .input-field {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius-soft);
            box-sizing: border-box;
            font-family: 'Lora', serif; 
            color: var(--dark-text);
            display: block; 
            margin-left: auto; 
            margin-right: auto; 
            max-width: 400px; 
        }

        #generatedCaptionDisplay {
            background-color: var(--soft-cream);
            border: 1px dashed var(--primary-gold);
            padding: 15px;
            margin-top: 20px;
            border-radius: var(--border-radius-soft);
            min-height: 50px;
            max-height: 180px; 
            overflow-y: auto; 
            text-align: left;
            white-space: pre-wrap; 
            word-wrap: break-word; 
            font-family: 'Lora', serif;
            color: var(--dark-text);
            margin-left: auto; 
            margin-right: auto; 
            max-width: 400px; 
        }

        
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            .header-content {
                margin-bottom: 15px;
            }

            .logo-image {
                max-width: 280px;
            }

            .container {
                padding: 20px;
                gap: 20px;
                width: calc(100% - 30px); 
            }

            .modal-content {
                padding: 25px;
                width: 95%;
            }

            .modal-content h3 {
                font-size: 1.5em;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .logo-image {
                max-width: 220px;
            }

            .container {
                padding: 15px;
                gap: 15px;
            }

            .action-button {
                padding: 10px 15px;
                font-size: 0.9em;
            }

            .modal-content {
                padding: 20px;
            }

            .modal-content h3 {
                font-size: 1.3em;
            }
        }

        
        @media (orientation: portrait) {
            .action-buttons {
                flex-direction: column; 
                gap: 15px; 
                align-items: center; 
                width: 100%; 
            }
            .action-buttons .action-button {
                width: 100%; 
                max-width: 280px; 
            }
        }

        
        .action-buttons {
            display: flex;
            justify-content: center; 
            gap: 15px; 
            width: 100%; 
            flex-wrap: wrap; 
        }

        
        @media (orientation: landscape) {
            
            #captionCustomizationModal .modal-buttons {
                flex-direction: row; 
                flex-wrap: nowrap;
                justify-content: center; 
                max-width: 600px; 
                gap: 10px; 
            }
            #captionCustomizationModal .modal-buttons .action-button {
                flex: 1 1 auto; 
                max-width: 280px; 
            }

            
            .action-buttons {
                flex-direction: row; 
                justify-content: center; 
                width: fit-content; 
                margin: 0 auto; 
                flex-wrap: nowrap; 
                gap: 10px; 
            }
            .action-button { 
                flex-grow: 0; 
                flex-shrink: 0; 
                width: auto; 
                max-width: 280px; 
            }
        }

        /* Countdown Timer Specific Styles */
        .countdown-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.9);
            border-radius: var(--border-radius-soft);
            padding: 30px;
            box-shadow: 0 8px 20px var(--shadow-medium);
            transition: opacity 1s ease;
            opacity: 1;
            margin-top: 25px; 
            width: 100%; 
            max-width: 600px; 
        }

        .countdown-container.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        .countdown-container h1 {
            font-family: 'Playfair Display', serif;
            font-size: 28px; 
            color: var(--primary-gold);
            margin-bottom: 20px;
        }

        .countdown {
            display: flex;
            gap: 15px; 
            justify-content: center;
            align-items: center;
            flex-wrap: wrap; 
        }

        .time-box {
            background: var(--light-gold);
            color: var(--light-text);
            border-radius: var(--border-radius-soft);
            padding: 15px 10px;
            box-shadow: 0 0 10px var(--shadow-strong);
            text-align: center;
            min-width: 60px;
            flex: 1 1 auto; 
            max-width: 90px; 
        }

        .time-box .value {
            font-size: 36px;
            font-family: 'Playfair Display', serif;
            font-weight: bold;
        }

        .time-box .label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        /* Responsive adjustments for countdown timer */
        @media (max-width: 480px) {
            .countdown-container h1 {
                font-size: 24px; 
            }
            .countdown {
                gap: 10px; 
            }
            .time-box {
                min-width: 50px;
                padding: 12px 8px;
            }
            .time-box .value {
                font-size: 30px; 
            }
            .time-box .label {
                font-size: 10px; 
            }
        }

        /* Custom Alert Modal Styling */
        #alertModal {
            /* Inherits modal-overlay styles */
            z-index: 2001; /* Higher than caption modal */
        }

        #alertModal .modal-content {
            /* Inherits modal-content styles */
            max-width: 400px;
            padding: 25px;
        }

        #alertModal .modal-content h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        #alertModal .modal-content p {
            font-size: 1em;
            margin-bottom: 20px;
        }

        #alertModal .modal-buttons {
            display: flex;
            justify-content: center;
            margin-top: 10px;
        }

        #alertModal .action-button {
            padding: 10px 20px;
            font-size: 1em;
            max-width: 150px; /* Adjust button width */
        }

        /* Styles for new radio buttons and select */
        .radio-group, .select-group {
            margin-bottom: 15px;
            width: 100%;
            max-width: 400px;
            text-align: left;
        }

        .radio-group label, .select-group label {
            display: block;
            text-align: left;
            font-size: 0.9em;
            font-weight: bold;
            color: var(--dark-text);
            margin-bottom: 8px;
        }

        .radio-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .radio-option input[type="radio"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid var(--primary-gold);
            border-radius: 50%;
            outline: none;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease-in-out;
        }

        .radio-option input[type="radio"]:checked {
            background-color: var(--primary-gold);
            border-color: var(--primary-gold);
        }

        .radio-option input[type="radio"]:checked::before {
            content: '';
            display: block;
            width: 8px;
            height: 8px;
            background-color: var(--warm-white);
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .radio-option label {
            margin-bottom: 0; /* Override block margin */
            font-weight: normal;
            font-size: 1em;
            cursor: pointer;
        }

        /* Specific styles for dynamically shown fields */
        .hidden-field {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Custom Alert Modal -->
    <div id="alertModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal-btn" id="alertModalCloseBtn"><i class="fas fa-times"></i></button>
            <h3 id="alertModalTitle"></h3>
            <p id="alertModalMessage"></p>
            <div class="modal-buttons">
                <button class="action-button" id="alertModalOkBtn">OKAY</button>
            </div>
        </div>
    </div>

    <div class="header-content">
        <img src="Logo.png" alt="Secret Garden" class="logo-image">
    </div>

    <div class="container">
        <div class="action-buttons">
            <button class="action-button" id="finalizeBtn">ADD CAPTION</button>
        </div>

        <!-- Countdown Timer Section -->
        <div class="countdown-container">
            <h1>Get ready! The DP Blast event begins in...</h1>
            <div class="countdown">
                <div class="time-box">
                    <div class="value" id="hours">00</div>
                    <div class="label">Hours</div>
                </div>
                <div class="time-box">
                    <div class="value" id="minutes">00</div>
                    <div class="label">Minutes</div>
                </div>
                <div class="time-box">
                    <div class="value" id="seconds">00</div>
                    <div class="label">Seconds</div>
                </div>
            </div>
        </div>
        <!-- End Countdown Timer Section -->

    </div>

    
    <div id="captionCustomizationModal" class="modal-overlay">
        <div class="modal-content">
            <button class="close-modal-btn" id="captionModalCloseBtn"><i class="fas fa-times"></i></button>
            <h3>CUSTOMIZE CAPTION</h3>
            <p>Fill in the details below to generate a personalized caption for your photo!</p>
            
            <!-- Affiliation Dropdown (Moved to Top) -->
            <div class="select-group">
                <label for="affiliationSelect">Affiliation:</label>
                <select id="affiliationSelect" class="input-field">
                    <option value="">Select Affiliation</option>
                    <option value="CAFS SC">CAFS SC</option>
                    <option value="CAFS FC">CAFS FC</option>
                    <option value="CAFS FC (Volunteer)">CAFS FC (Volunteer)</option>
                </select>
            </div>

            <!-- Salutation Radio Buttons -->
            <div class="radio-group">
                <label>Salutation:</label>
                <div class="radio-options">
                    <div class="radio-option">
                        <input type="radio" id="salutationKuya" name="salutation" value="Kuya">
                        <label for="salutationKuya">Kuya</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="salutationAte" name="salutation" value="Ate">
                        <label for="salutationAte">Ate</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="salutationNone" name="salutation" value="none" checked>
                        <label for="salutationNone">Prefer not to include</label>
                    </div>
                </div>
            </div>

            <label for="personNameInput" class="block text-left text-sm font-bold text-gray-700 mb-1">Nickname or Name:</label>
            <input type="text" id="personNameInput" class="input-field" placeholder="Nickname or Name (e.g. Juan / Jay)">
            
            <!-- Position Input (Conditionally Visible) -->
            <div id="positionField" class="hidden-field">
                <label for="positionInput" class="block text-left text-sm font-bold text-gray-700 mb-1">Position:</label>
                <input type="text" id="positionInput" class="input-field" placeholder="e.g. Chairperson, STRAW Head">
            </div>

            <!-- Committee Dropdown (Conditionally Visible) -->
            <div id="committeeField" class="hidden-field">
                <label for="committeeSelect" class="block text-left text-sm font-bold text-gray-700 mb-1">Committee:</label>
                <select id="committeeSelect" class="input-field">
                    <option value="">Select Committee</option>
                    <option value="Information and Publicity Committee">Information and Publicity Committee</option>
                    <option value="Education and Research Committee">Education and Research Committee</option>
                    <option value="Student Rights and Welfare Committee">Student Rights and Welfare Committee</option>
                    <option value="Gender Rights and Welfare Committee">Gender Rights and Welfare Committee</option>
                    <option value="Logistics Committee">Logistics Committee</option>
                    <option value="Community Rights and Welfare Committee">Community Rights and Welfare Committee</option>
                </select>
            </div>

            <div id="generatedCaptionDisplay">
                Your generated caption will appear here.
            </div>
            <div class="modal-buttons" id="captionCustomizationModalButtons">
                <button class="action-button" id="generateCaptionBtn">GENERATE CAPTION</button>
                <button class="action-button" id="copyCaptionBtn">COPY TO CLIPBOARD</button>
            </div>
        </div>
    </div>

    <script>
        let generatedCaption = ""; 

        // Base caption parts
        // Modified baseCaptionPart1 to use a single placeholder for salutation and nickname
        const baseCaptionPart1 = `𝑩𝒆𝒏𝒆𝒂𝒕𝒉 𝒕𝒉𝒆 𝒉𝒖𝒔𝒉 𝒐𝒇 𝒆𝒎𝒆𝒓𝒂𝒍𝒅 𝒍𝒆𝒂𝒗𝒆𝒔, 𝒂 𝒔𝒆𝒆𝒅𝒍𝒊𝒏𝒈 𝒔𝒕𝒊𝒓𝒔 𝒂𝒏𝒅 𝒕𝒉𝒆 𝒈𝒂𝒓𝒅𝒆𝒏 𝒃𝒓𝒆𝒂𝒕𝒉𝒆𝒔 🍃🌬

The enchanted gate has finally opened!🗝🚪 I am [introductoryPhrase], `;

        const baseCaptionPart2 = `—ready to take root, bloom with purpose, and grow through the journey ahead! 🦋🌸

As we step into this new journey, let our presence be known—𝙡𝙚𝙩 𝙩𝙝𝙚 𝙜𝙖𝙧𝙙𝙚𝙣 𝙧𝙚𝙘𝙤𝙜𝙣𝙞𝙯𝙚 𝙤𝙣𝙚 𝙤𝙛 𝙞𝙩𝙨 𝙤𝙬𝙣. This moment marks our first bloom in a place where roots run deep and stories unfold like petals under the sun.🌷

In this enchanted space where curiosity grows wild and purpose takes root, we are more than just a student. We are the new bearer of light, learning, and legacy. A quiet magic lives in every scholar who chooses to grow. 🪄

We are called to bloom not only for ourselves but for the land and the people we serve. In this hidden garden of learning and purpose, each seedling is nurtured by knowledge, rooted in service, and destined to bloom with 𝙞𝙣𝙩𝙚𝙜𝙧𝙞𝙩𝙮, 𝙥𝙖𝙨𝙨𝙞𝙤𝙣, 𝙖𝙣𝙙 𝙘𝙖𝙧𝙚.☘️

We are 𝙨𝙥𝙧𝙤𝙪𝙩𝙨 of promise.🌾
We are the 𝙗𝙚𝙖𝙧𝙚𝙧𝙨 of hope.🫧
We are the new 𝙄𝙨𝙠𝙤𝙡𝙖𝙧 𝙣𝙜 𝘽𝙖𝙮𝙖𝙣, ready to root in purpose and rise in service.🌻

𝐖𝐞’𝐯𝐞 𝐨𝐟𝐟𝐢𝐜𝐢𝐚𝐥𝐥𝐲 𝐞𝐧𝐭𝐞𝐫𝐞𝐝 𝐭𝐡𝐞 𝐠𝐚𝐫𝐝𝐞𝐧, 𝐚𝐧𝐝 𝐧𝐨𝐰, 𝐰𝐞 𝐚𝐫𝐞 𝐫𝐞𝐚𝐝𝐲 𝐭𝐨 𝐠𝐫𝐨𝐰. 🧚‍♀️🧚‍♂️

To step into CAFS is to step into a garden of possibility—𝙬𝙝𝙚𝙧𝙚 𝙖𝙜𝙧𝙞𝙘𝙪𝙡𝙩𝙪𝙧𝙚 𝙢𝙚𝙚𝙩𝙨  𝙨𝙘𝙞𝙚𝙣𝙘𝙚, 𝙖𝙣𝙙 𝙬𝙝𝙚𝙧𝙚 𝙙𝙧𝙚𝙖𝙢𝙨 𝙩𝙖𝙠𝙚 𝙧𝙤𝙤𝙩.🔍📖

𝑺𝒐 𝒍𝒆𝒕 𝒕𝒉𝒆 𝒗𝒊𝒏𝒆𝒔 𝒆𝒏𝒕𝒘𝒊𝒏𝒆 𝒂𝒏𝒅 𝒕𝒉𝒆 𝒃𝒍𝒐𝒔𝒔𝒐𝒎𝒔 𝒓𝒊𝒔𝒆. 𝑻𝒉𝒆 𝒈𝒂𝒓𝒅𝒆𝒏 𝒔𝒆𝒆𝒔 𝒚𝒐𝒖 𝒘𝒊𝒕𝒉 𝒘𝒐𝒏𝒅𝒆𝒓 𝒊𝒏 𝒊𝒕𝒔 𝒆𝒚𝒆𝒔 🌱✊🏼

#CAFSeedling
#CAFreshieS2025
#Freshies2025
#CAFS
#UPLB`;


        function convertToMathSansBold(text) {
            let convertedText = '';
            for (let i = 0; i < text.length; i++) {
                const charCode = text.charCodeAt(i);
                if (charCode >= 65 && charCode <= 90) { 
                    convertedText += String.fromCodePoint(charCode - 65 + 0x1D5D4);
                } else if (charCode >= 97 && charCode <= 122) { 
                    convertedText += String.fromCodePoint(charCode - 97 + 0x1D5EE);
                } else if (charCode >= 48 && charCode <= 57) { 
                    convertedText += String.fromCodePoint(charCode - 48 + 0x1D7EC);
                } else {
                    convertedText += text[i]; 
                }
            }
            return convertedText;
        }

        const captionCustomizationModal = document.getElementById('captionCustomizationModal');
        const captionModalCloseBtn = document.getElementById('captionModalCloseBtn');
        const salutationRadios = document.querySelectorAll('input[name="salutation"]');
        const personNameInput = document.getElementById('personNameInput');
        const affiliationSelect = document.getElementById('affiliationSelect');
        const positionField = document.getElementById('positionField');
        const positionInput = document.getElementById('positionInput');
        const committeeField = document.getElementById('committeeField');
        const committeeSelect = document.getElementById('committeeSelect');
        const generatedCaptionDisplay = document.getElementById('generatedCaptionDisplay');
        const generateCaptionBtn = document.getElementById('generateCaptionBtn');
        const copyCaptionBtn = document.getElementById('copyCaptionBtn');

        const finalizeBtn = document.getElementById('finalizeBtn');

        const alertModal = document.getElementById('alertModal');
        const alertModalTitle = document.getElementById('alertModalTitle');
        const alertModalMessage = document.getElementById('alertModalMessage');
        const alertModalCloseBtn = document.getElementById('alertModalCloseBtn');
        const alertModalOkBtn = document.getElementById('alertModalOkBtn');

        function showAlertModal(message, title = "ALERT") {
            alertModalTitle.textContent = title;
            alertModalMessage.textContent = message;
            alertModal.classList.add('active');
        }

        function hideAlertModal() {
            alertModal.classList.remove('active');
        }

        alertModalCloseBtn.addEventListener('click', hideAlertModal);
        alertModalOkBtn.addEventListener('click', hideAlertModal);

        captionModalCloseBtn.addEventListener('click', hideCaptionCustomizationModal);

        function showCaptionCustomizationModal() {
            captionCustomizationModal.classList.add('active');
            // Reset fields
            document.getElementById('salutationNone').checked = true; // Default salutation
            personNameInput.value = '';
            affiliationSelect.value = '';
            positionInput.value = '';
            committeeSelect.value = '';
            positionField.classList.add('hidden-field');
            committeeField.classList.add('hidden-field');
            generatedCaptionDisplay.textContent = 'Your generated caption will appear here.';
            generatedCaption = "";
            copyCaptionBtn.textContent = 'COPY TO CLIPBOARD';
            copyCaptionBtn.disabled = false; 
        }

        function hideCaptionCustomizationModal() {
            captionCustomizationModal.classList.remove('active');
        }

        // Event listener for affiliation select to toggle visibility
        affiliationSelect.addEventListener('change', () => {
            const selectedAffiliation = affiliationSelect.value;
            if (selectedAffiliation === 'CAFS SC' || selectedAffiliation === 'CAFS FC') {
                positionField.classList.remove('hidden-field');
                committeeField.classList.add('hidden-field');
                committeeSelect.value = ''; // Clear committee selection
            } else if (selectedAffiliation === 'CAFS FC (Volunteer)') {
                positionField.classList.add('hidden-field');
                positionInput.value = ''; // Clear position input
                committeeField.classList.remove('hidden-field');
            } else {
                positionField.classList.add('hidden-field');
                positionInput.value = '';
                committeeField.classList.add('hidden-field');
                committeeSelect.value = '';
            }
        });

        generateCaptionBtn.addEventListener('click', () => {
            const nickname = personNameInput.value.trim();
            const affiliation = affiliationSelect.value;
            let salutation = '';
            for (const radio of salutationRadios) {
                if (radio.checked) {
                    salutation = radio.value;
                    break;
                }
            }

            let mainAffiliationText = ''; 
            let councilType = ''; 

            // Validation
            if (!nickname || !affiliation) {
                showAlertModal("Please fill in Nickname and Affiliation.", "Missing Information");
                return;
            }

            if (affiliation === 'CAFS SC' || affiliation === 'CAFS FC') {
                const position = positionInput.value.trim();
                if (!position) {
                    showAlertModal("Please enter your Position for the selected Affiliation.", "Missing Information");
                    return;
                }
                councilType = (affiliation === 'CAFS FC') ? 'Freshman' : 'Student';
                mainAffiliationText = `the ${convertToMathSansBold(position)} of College of Agriculture and Food Science ${councilType} Council`;

            } else if (affiliation === 'CAFS FC (Volunteer)') {
                const committee = committeeSelect.value;
                if (!committee) {
                    showAlertModal("Please select your Committee for the selected Affiliation.", "Missing Information");
                    return;
                }
                councilType = 'Freshman'; 
                mainAffiliationText = `volunteer from ${convertToMathSansBold(committee)} of College of Agriculture and Food Science Freshman Council`;
            } else {
                 showAlertModal("Please select a valid Affiliation.", "Missing Information");
                 return;
            }

            // Construct the introductory phrase with correct spacing
            let introductoryPhrase = convertToMathSansBold(nickname);
            if (salutation !== 'none') {
                introductoryPhrase = `${convertToMathSansBold(salutation)} ${introductoryPhrase}`;
            }

            // Construct the final caption using the base parts and dynamic affiliation text
            let finalCaption = baseCaptionPart1
                                .replace('[introductoryPhrase]', introductoryPhrase)
                                + mainAffiliationText
                                + baseCaptionPart2;
            
            generatedCaption = finalCaption;
            generatedCaptionDisplay.textContent = generatedCaption;
            copyCaptionBtn.disabled = false; 
            copyCaptionBtn.textContent = 'COPY TO CLIPBOARD'; 
        });

        copyCaptionBtn.addEventListener('click', () => {
            if (generatedCaption) {
                const textArea = document.createElement('textarea');
                textArea.value = generatedCaption;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showAlertModal("COPIED!", "SUCCESS");
                    copyCaptionBtn.textContent = 'COPIED!';
                    copyCaptionBtn.disabled = true;
                    setTimeout(() => {
                        copyCaptionBtn.textContent = 'COPY TO CLIPBOARD';
                        copyCaptionBtn.disabled = false;
                    }, 2000); 
                } catch (err) {
                    console.error('FAILED TO COPY CAPTION: ', err);
                    showAlertModal("COULD NOT COPY CAPTION. PLEASE TRY MANUALLY.", "ERROR");
                }
                document.body.removeChild(textArea);
            } else {
                showAlertModal("PLEASE GENERATE A CAPTION FIRST.", "INFORMATION");
            }
        });

        const KICKOFF_TIME = new Date("Jul 26, 2025 19:00:00").getTime(); 
        const CAPTION_ENABLE_TIME = new Date("Jul 26, 2024 00:00:00").getTime(); 

        finalizeBtn.addEventListener('click', () => {
            const now = new Date().getTime();
            console.log("Current time (click):", new Date(now).toLocaleString());
            console.log("Caption Enable Time (click):", new Date(CAPTION_ENABLE_TIME).toLocaleString());

            if (now < CAPTION_ENABLE_TIME) {
                showAlertModal("Captions can only be added starting 2 minutes before the 7:00 PM DP Blast. Please try again then.", "CAPTION UNAVAILABLE");
                return;
            }
            
            showCaptionCustomizationModal();
        });

        const countdownContainer = document.querySelector('.countdown-container');
        let timerInterval;

        const countdown = () => {
            const now = new Date().getTime();
            let distance = KICKOFF_TIME - now;

            console.log("Countdown - Current Time:", new Date(now).toLocaleString());
            console.log("Countdown - Kickoff Time:", new Date(KICKOFF_TIME).toLocaleString());
            console.log("Countdown - Distance (ms):", distance);

            if (distance <= 0) {
                document.getElementById("hours").textContent = "00";
                document.getElementById("minutes").textContent = "00";
                document.getElementById("seconds").textContent = "00";

                countdownContainer.classList.add('fade-out'); 

                setTimeout(() => {
                    countdownContainer.style.display = 'none'; 
                }, 1000);

                clearInterval(timerInterval);
                return;
            }

            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("hours").textContent = String(hours).padStart(2, '0');
            document.getElementById("minutes").textContent = String(minutes).padStart(2, '0');
            document.getElementById("seconds").textContent = String(seconds).padStart(2, '0');
        };

        window.onload = function() {
            console.log("window.onload triggered.");
            const logoImage = document.querySelector('.logo-image');
            
            if (!logoImage.complete) {
                logoImage.onload = () => {
                    console.log("Logo loaded.");
                    countdown(); 
                    timerInterval = setInterval(countdown, 1000);
                };
                logoImage.onerror = () => {
                    console.error("Failed to load Logo.png. Displaying placeholder.");
                    logoImage.src = "https://placehold.co/350x100/E0E0E0/333333?text=LOGO"; 
                    countdown(); 
                    timerInterval = setInterval(countdown, 1000);
                };
            } else {
                console.log("Logo already loaded.");
                countdown(); 
                timerInterval = setInterval(countdown, 1000);
            }
        };
    </script>
</body>
</html>
 
